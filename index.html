<!doctype html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Slide Deck: Standing + Sitting Players Layout</title>
    <style>
      :root {
        --bg0: #0b0f14;
        --bg1: #101a1f;
        --card: rgba(255, 255, 255, 0.06);
        --card2: rgba(255, 255, 255, 0.09);
        --text: rgba(255, 255, 255, 0.92);
        --muted: rgba(255, 255, 255, 0.72);
        --muted2: rgba(255, 255, 255, 0.55);
        --line: rgba(255, 255, 255, 0.14);
        --accent: #78ffd1;
        --accent2: #ffd36f;
        --danger: #ff6b6b;
        --shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        --mono: ui-monospace, "Cascadia Mono", Consolas, monospace;
        --serif: "Palatino Linotype", Palatino, "Book Antiqua", serif;
      }

      * { box-sizing: border-box; }

      html, body { height: 100%; }

      body {
        margin: 0;
        color: var(--text);
        background:
          radial-gradient(1000px 800px at 10% 0%, rgba(120, 255, 209, 0.14), transparent 55%),
          radial-gradient(900px 600px at 90% 10%, rgba(255, 211, 111, 0.12), transparent 55%),
          linear-gradient(180deg, var(--bg0), var(--bg1));
        font-family: var(--serif);
        overflow: hidden;
      }

      a { color: var(--accent); }

      .deck {
        position: relative;
        width: 100vw;
        height: 100vh;
      }

      .slide {
        position: absolute;
        inset: 0;
        display: none;
        padding: clamp(16px, 3vw, 34px);
        align-items: center;
        justify-content: center;
        user-select: none;
      }

      .slide.is-active {
        display: flex;
        animation: slideIn 220ms ease-out both;
      }

      @keyframes slideIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .stage {
        width: min(1200px, 100%);
        height: min(720px, 100%);
        border: 1px solid var(--line);
        background: linear-gradient(180deg, var(--card2), var(--card));
        border-radius: 22px;
        box-shadow: var(--shadow);
        overflow: hidden;
        position: relative;
      }

      .stage.pad { padding: 22px; }

      .topbar {
        position: absolute;
        top: 16px;
        left: 16px;
        right: 16px;
        display: flex;
        gap: 12px;
        align-items: baseline;
        justify-content: space-between;
        z-index: 40;
        pointer-events: none;
      }

      .topbar .h {
        font-size: clamp(18px, 2.1vw, 28px);
        margin: 0;
        letter-spacing: 0.2px;
      }

      .topbar .meta {
        font-family: var(--mono);
        font-size: 12px;
        color: var(--muted2);
        direction: ltr;
        text-align: left;
      }

      .cols {
        display: grid;
        grid-template-columns: 1.05fr 0.95fr;
        gap: 18px;
        height: 100%;
      }

      @media (max-width: 980px) {
        .stage { height: 100%; border-radius: 16px; }
        .cols { grid-template-columns: 1fr; }
      }

      .card {
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.16);
        border-radius: 18px;
        padding: 16px;
        height: 100%;
        overflow: auto;
        user-select: text;
      }

      .card h2 { margin: 0 0 10px; font-size: 18px; }
      .card p { margin: 0 0 10px; color: var(--muted); line-height: 1.8; }

      .k { font-family: var(--mono); font-size: 12px; color: rgba(255, 255, 255, 0.86); }

      pre {
        margin: 12px 0 0;
        padding: 12px;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(0, 0, 0, 0.32);
        overflow: auto;
        direction: ltr;
        text-align: left;
        user-select: text;
      }

      code { font-family: var(--mono); font-size: 12px; color: rgba(255, 255, 255, 0.88); }

      .nav {
        position: fixed;
        bottom: 14px;
        left: 14px;
        right: 14px;
        display: flex;
        justify-content: space-between;
        align-items: end;
        gap: 12px;
        z-index: 999;
      }

      .nav .left, .nav .right { display: flex; gap: 10px; align-items: center; }

      .btn {
        appearance: none;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.35);
        color: var(--text);
        border-radius: 12px;
        padding: 10px 12px;
        cursor: pointer;
        font-family: var(--mono);
        font-size: 12px;
        user-select: none;
      }

      .btn:hover { border-color: rgba(255, 255, 255, 0.28); }

      .dots { display: flex; gap: 6px; align-items: center; }

      .dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.22);
        background: rgba(255, 255, 255, 0.06);
        cursor: pointer;
        padding: 0;
      }

      .dot.is-active { background: rgba(120, 255, 209, 0.28); border-color: rgba(120, 255, 209, 0.5); }

      .help {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        background: rgba(0, 0, 0, 0.58);
        padding: 22px;
      }

      .help.is-open { display: flex; }

      .help .box {
        width: min(820px, 100%);
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: rgba(0, 0, 0, 0.55);
        border-radius: 18px;
        box-shadow: var(--shadow);
        padding: 18px;
        user-select: text;
      }

      .help h3 { margin: 0 0 10px; }

      .help .grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
      @media (max-width: 820px) { .help .grid2 { grid-template-columns: 1fr; } }

      .help .item {
        border: 1px dashed rgba(255, 255, 255, 0.18);
        border-radius: 14px;
        padding: 12px;
        color: var(--muted);
        line-height: 1.7;
      }

      /* Slide 1: keep the player layout matching pages/teams.html */
      .team-hero-wrapper { position: relative; }

      .team-hero-container {
        position: relative;
        width: 100%;
        aspect-ratio: 21/9;
        background-image: url('../../assets/photos/teams/Team_bg.png');
        background-size: cover;
        background-position: center;
        border-radius: 12px;
        overflow: hidden;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        padding-bottom: 20px;
      }

      .team-hero-players {
        position: relative;
        width: 100%;
        max-width: 1200px;
        height: 100%;
        display: flex;
        align-items: flex-end;
        justify-content: center;
      }

      .team-player-link {
        position: absolute;
        bottom: 0;
        transition: all 0.3s ease;
        cursor: pointer;
        text-decoration: none;
      }

      .team-player-link::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 80%;
        height: 25px;
        background: radial-gradient(ellipse, rgba(0, 0, 0, 0.25) 0%, rgba(0, 0, 0, 0.1) 40%, transparent 70%);
        border-radius: 50%;
        z-index: -1;
      }

      .team-player-img {
        height: 420px;
        width: auto;
        display: block;
        transition: all 0.3s ease;
        filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4));
      }

      .team-player-link:nth-child(1) { left: 23%; bottom: 0; z-index: 2; }
      .team-player-link:nth-child(2) { left: 33%; bottom: 0; z-index: 3; }
      .team-player-link:nth-child(3) { left: 50%; transform: translateX(-50%); bottom: 0; z-index: 4; }
      .team-player-link:nth-child(4) { right: 33%; bottom: 0; z-index: 3; }
      .team-player-link:nth-child(5) { right: 23%; bottom: 0; z-index: 2; }

      .team-player-sitting {
        position: absolute;
        bottom: 0;
        transition: all 0.3s ease;
        cursor: pointer;
        text-decoration: none;
      }

      .team-player-sitting::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 70%;
        height: 20px;
        background: radial-gradient(ellipse, rgba(0, 0, 0, 0.25) 0%, rgba(0, 0, 0, 0.1) 40%, transparent 70%);
        border-radius: 50%;
        z-index: -1;
      }

      .team-player-sitting-img {
        height: 280px;
        width: auto;
        display: block;
        transition: all 0.3s ease;
        filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4));
      }

      .team-player-sitting:nth-child(6) { left: 28%; bottom: 0; z-index: 5; }
      .team-player-sitting:nth-child(7) { left: 38%; bottom: 0; z-index: 6; }
      .team-player-sitting:nth-child(8) { right: 38%; bottom: 0; z-index: 6; }
      .team-player-sitting:nth-child(9) { right: 28%; bottom: 0; z-index: 7; }

      .team-player-link:hover,
      .team-player-sitting:hover { transform: rotateY(8deg) scale(1.03); }

      .team-player-link:nth-child(3):hover { transform: translateX(-50%) rotateY(8deg) scale(1.03); }

      .team-player-link:hover .team-player-img,
      .team-player-sitting:hover .team-player-sitting-img { filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.6)); }

      /* Match the site behavior: when one player is hovered, grayscale the rest */
      .team-hero-players:has(.team-player-link:hover) .team-player-link:not(:hover),
      .team-hero-players:has(.team-player-sitting:hover) .team-player-link:not(:hover),
      .team-hero-players:has(.team-player-link:hover) .team-player-sitting:not(:hover),
      .team-hero-players:has(.team-player-sitting:hover) .team-player-sitting:not(:hover) { filter: grayscale(1); }

      .team-hero-players:has(.team-player-link:hover) .team-player-link:not(:hover) .team-player-img,
      .team-hero-players:has(.team-player-sitting:hover) .team-player-link:not(:hover) .team-player-img,
      .team-hero-players:has(.team-player-link:hover) .team-player-sitting:not(:hover) .team-player-sitting-img,
      .team-hero-players:has(.team-player-sitting:hover) .team-player-sitting:not(:hover) .team-player-sitting-img {
        filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4)) grayscale(1);
      }

      @media (max-width: 768px) {
        .team-hero-container { aspect-ratio: 16/10; }
        .team-player-img { height: 290px; }
        .team-player-sitting-img { height: 200px; }
      }

      .timer {
        display: grid;
        gap: 10px;
        align-content: start;
      }

      .clock {
        font-family: var(--mono);
        font-size: 44px;
        letter-spacing: 1px;
      }

      .clock small {
        display: block;
        margin-top: 4px;
        font-size: 12px;
        color: var(--muted2);
        letter-spacing: 0;
      }

      .toast {
        position: fixed;
        left: 16px;
        bottom: 72px;
        padding: 10px 12px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: rgba(0, 0, 0, 0.55);
        border-radius: 14px;
        box-shadow: var(--shadow);
        color: rgba(255, 255, 255, 0.92);
        font-family: var(--mono);
        font-size: 12px;
        opacity: 0;
        transform: translateY(8px);
        transition: all 0.18s ease;
        pointer-events: none;
        max-width: 44ch;
      }

      .toast.show { opacity: 1; transform: translateY(0); }
    </style>
  </head>
  <body>
    <main class="deck" id="deck" aria-label="Slide deck">
      <section class="slide is-active" data-title="Artifact" aria-label="Slide 1: Live artifact">
        <div class="stage">
          <div class="topbar">
            <h1 class="h" dir="ltr" style="text-align:left;">Standing + Sitting Players Hero Layout</h1>
            <div class="meta">Code ref: broadstreet-rfc-website/pages/teams.html</div>
          </div>
          <div style="position:absolute; inset: 70px 22px 22px; display:flex; align-items:center;">
            <div class="team-hero-wrapper" style="width:100%;">
              <div class="team-hero-container">
                <div class="team-hero-players">
                  <a href="../../pages/teams.html" class="team-player-link" aria-label="Standing Player 1 (opens teams.html)">
                    <img src="../../assets/photos/teams/sl1.png" alt="Standing Player 1" class="team-player-img" />
                  </a>
                  <a href="../../pages/teams.html" class="team-player-link" aria-label="Standing Player 2 (opens teams.html)">
                    <img src="../../assets/photos/teams/sl2.png" alt="Standing Player 2" class="team-player-img" />
                  </a>
                  <a href="../../pages/teams.html" class="team-player-link" aria-label="Standing Player 3 (opens teams.html)">
                    <img src="../../assets/photos/teams/sl3.png" alt="Standing Player 3" class="team-player-img" />
                  </a>
                  <a href="../../pages/teams.html" class="team-player-link" aria-label="Standing Player 4 (opens teams.html)">
                    <img src="../../assets/photos/teams/sl4.png" alt="Standing Player 4" class="team-player-img" />
                  </a>
                  <a href="../../pages/teams.html" class="team-player-link" aria-label="Standing Player 5 (opens teams.html)">
                    <img src="../../assets/photos/teams/sl5.png" alt="Standing Player 5" class="team-player-img" />
                  </a>

                  <a href="../../pages/teams.html" class="team-player-sitting" aria-label="Sitting Player 1 (opens teams.html)">
                    <img src="../../assets/photos/teams/sitted1.png" alt="Sitting Player 1" class="team-player-sitting-img" />
                  </a>
                  <a href="../../pages/teams.html" class="team-player-sitting" aria-label="Sitting Player 2 (opens teams.html)">
                    <img src="../../assets/photos/teams/sitted2.png" alt="Sitting Player 2" class="team-player-sitting-img" />
                  </a>
                  <a href="../../pages/teams.html" class="team-player-sitting" aria-label="Sitting Player 3 (opens teams.html)">
                    <img src="../../assets/photos/teams/sitted3.png" alt="Sitting Player 3" class="team-player-sitting-img" />
                  </a>
                  <a href="../../pages/teams.html" class="team-player-sitting" aria-label="Sitting Player 4 (opens teams.html)">
                    <img src="../../assets/photos/teams/sitted4.png" alt="Sitting Player 4" class="team-player-sitting-img" />
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" data-title="Topic" aria-label="Slide 2: Topic and goal">
        <div class="stage pad">
          <div class="cols">
            <div class="card">
              <h2>Topic + Goal</h2>
              <p>موضوع دمو: چطور دو ردیف بازیکن (ایستاده پشت، نشسته جلو) را مثل عکس تیمی کنار هم قرار دادم، ولی به شکل کاملاً قابل کنترل با CSS.</p>
              <p class="k" dir="ltr" style="text-align:left;">Goal: transparent PNGs + absolute positioning + z-index layering.</p>
              <p class="k">نکته: اسلاید اول دقیقاً Artifact است. بقیه اسلایدها توضیح روش و دلیل انتخاب‌هاست.</p>
            </div>
            <div class="card" dir="ltr" style="text-align:left;">
              <h2>2-Min Talk Track (EN)</h2>
              <p><strong>00:00</strong> Today I will show how I built the hero section where standing and sitting players appear together, fully controlled with CSS.</p>
              <p><strong>00:20</strong> I used separate PNG images with transparent backgrounds and placed them on top of a single background image.</p>
              <p><strong>00:50</strong> Key choice: absolute positioning inside a relative container for precise control (instead of fighting flex/grid).</p>
              <p><strong>01:10</strong> Sitting players are in front using higher z-index; spacing is tuned with nth-child rules.</p>
              <p><strong>01:30</strong> Depth: ground shadows + drop-shadow; hover focus with subtle transform.</p>
              <p><strong>01:50</strong> Question: manual nth-child positioning or data-driven CSS variables per player?</p>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" data-title="HTML" aria-label="Slide 3: HTML structure">
        <div class="stage pad">
          <div class="cols">
            <div class="card">
              <h2>What I Built (HTML)</h2>
              <p>همه‌ی بازیکن‌ها داخل یک کانتینر مشترک هستند. ترتیب DOM مهم است چون از <code>nth-child</code> برای پوزیشن‌ها استفاده کرده‌ام.</p>
              <pre><code>&lt;div class=&quot;team-hero-container&quot;&gt;
  &lt;div class=&quot;team-hero-players&quot;&gt;
    &lt;!-- Standing (back row) --&gt;
    &lt;a class=&quot;team-player-link&quot;&gt;&lt;img class=&quot;team-player-img&quot; ...&gt;&lt;/a&gt;
    ...
    &lt;!-- Sitting (front row) --&gt;
    &lt;a class=&quot;team-player-sitting&quot;&gt;&lt;img class=&quot;team-player-sitting-img&quot; ...&gt;&lt;/a&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
            </div>
            <div class="card">
              <h2>Why PNG Transparent?</h2>
              <p>وقتی پس‌زمینه‌ی هر بازیکن شفاف است:</p>
              <p>1) روی بک‌گراند مشترک (استادیوم) طبیعی می‌نشیند</p>
              <p>2) لایه‌بندی (پشت/جلو) با <code>z-index</code> ساده می‌شود</p>
              <p>3) می‌توان برای هر بازیکن سایه و hover جدا گذاشت</p>
              <p class="k" dir="ltr" style="text-align:left;">Alternative: one big team PNG. Downside: no per-player hover, no easy re-ordering.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" data-title="CSS" aria-label="Slide 4: CSS positioning and layering">
        <div class="stage pad">
          <div class="cols">
            <div class="card" dir="ltr" style="text-align:left;">
              <h2>Key CSS (positioning)</h2>
              <pre><code>.team-hero-players { position: relative; height: 100%; }
.team-player-link,
.team-player-sitting { position: absolute; bottom: 0; }</code></pre>
              <p class="k">Reason: pixel-level control, no layout shifts.</p>
              <pre><code>/* standing positions */
.team-player-link:nth-child(1) { left: 23%; z-index: 2; }
.team-player-link:nth-child(3) { left: 50%; transform: translateX(-50%); z-index: 4; }</code></pre>
            </div>
            <div class="card">
              <h2>Standing vs Sitting (z-index)</h2>
              <p>بازیکنان نشسته جلو هستند چون <code>z-index</code> بزرگ‌تر دارند.</p>
              <pre><code>/* sitting positions */
.team-player-sitting:nth-child(6) { left: 28%; z-index: 5; }
.team-player-sitting:nth-child(9) { right: 28%; z-index: 7; }</code></pre>
              <p class="k" dir="ltr" style="text-align:left;">Tradeoff: nth-child is quick for a fixed set of players; CSS variables are better for dynamic data.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" data-title="Details" aria-label="Slide 5: Depth and UX">
        <div class="stage pad">
          <div class="cols">
            <div class="card" dir="ltr" style="text-align:left;">
              <h2>Depth + UX</h2>
              <pre><code>/* ground shadow */
.team-player-link::after { background: radial-gradient(...); }

/* player shadow */
.team-player-img { filter: drop-shadow(0 8px 16px rgba(0,0,0,.4)); }

/* hover */
.team-player-link:hover { transform: rotateY(8deg) scale(1.03); }</code></pre>
              <p class="k">Small 3D effect: gives focus without breaking the layout.</p>
            </div>
            <div class="card">
              <h2>One Question (for feedback)</h2>
              <p>به نظر شما بهتر است پوزیشن‌ها را:</p>
              <p>1) همینطور دستی با <code>nth-child</code> نگه دارم؟</p>
              <p>2) یا هر بازیکن با CSS variables مثل <code>--x</code> و <code>--z</code> موقعیت بگیرد تا تعداد بازیکن‌ها dynamic شود؟</p>
              <p class="k" dir="ltr" style="text-align:left;">If you want: I can refactor this deck to the CSS-variables approach later.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="slide" data-title="Timer" aria-label="Slide 6: Timer">
        <div class="stage pad">
          <div class="cols">
            <div class="card">
              <h2>2-Min Timer</h2>
              <p>وقتی شروع به صحبت کردی، Start را بزن. این فقط برای تمرین زمان‌بندی است.</p>
              <div class="timer" aria-label="2 minute timer">
                <div class="clock" id="clock">02:00
                  <small id="clockNote">Press Start when you begin speaking</small>
                </div>
                <div style="display:flex; gap:10px; flex-wrap:wrap;">
                  <button class="btn" id="startBtn" type="button">Start</button>
                  <button class="btn" id="pauseBtn" type="button">Pause</button>
                  <button class="btn" id="resetBtn" type="button">Reset</button>
                </div>
              </div>
            </div>
            <div class="card" dir="ltr" style="text-align:left;">
              <h2>Navigation Reminder</h2>
              <p class="k">Next: Right Arrow / Space</p>
              <p class="k">Prev: Left Arrow</p>
              <p class="k">Help: ?</p>
              <p class="k">Jump: click dots</p>
              <p style="margin-top:14px;"><a href="../../pages/teams.html">Open the real page (teams.html)</a></p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <nav class="nav" aria-label="Deck navigation">
      <div class="left">
        <button class="btn" id="prevBtn" type="button" aria-label="Previous slide">Prev</button>
        <button class="btn" id="nextBtn" type="button" aria-label="Next slide">Next</button>
        <button class="btn" id="fsBtn" type="button" aria-label="Toggle fullscreen">FS</button>
        <button class="btn" id="helpBtn" type="button" aria-label="Help">?</button>
      </div>
      <div class="right">
        <div class="dots" id="dots" aria-label="Slide progress"></div>
        <div class="k" id="counter" dir="ltr">1 / 1</div>
      </div>
    </nav>

    <div class="help" id="help" aria-hidden="true">
      <div class="box" role="dialog" aria-label="Help dialog">
        <h3>Controls</h3>
        <div class="grid2">
          <div class="item"><span class="k">Next</span>: Right Arrow, Space, PageDown</div>
          <div class="item"><span class="k">Prev</span>: Left Arrow, PageUp</div>
          <div class="item"><span class="k">First/Last</span>: Home / End</div>
          <div class="item"><span class="k">Close Help</span>: Esc</div>
          <div class="item"><span class="k">Fullscreen</span>: F</div>
        </div>
        <p class="k" style="margin-top:12px;">Tip: Slide 1 is the artifact. Start there and only then explain the CSS choices.</p>
      </div>
    </div>

    <div class="toast" id="toast" role="status" aria-live="polite"></div>

    <script>
      (function () {
        var deck = document.getElementById('deck');
        var slides = Array.prototype.slice.call(deck.querySelectorAll('.slide'));
        var prevBtn = document.getElementById('prevBtn');
        var nextBtn = document.getElementById('nextBtn');
        var fsBtn = document.getElementById('fsBtn');
        var helpBtn = document.getElementById('helpBtn');
        var dots = document.getElementById('dots');
        var counter = document.getElementById('counter');
        var help = document.getElementById('help');

        function clamp(n, lo, hi) { return Math.max(lo, Math.min(hi, n)); }

        function slideFromHash() {
          var h = (window.location.hash || '').replace('#', '');
          if (!h) return 0;
          if (h.indexOf('slide-') === 0) {
            var n = parseInt(h.slice('slide-'.length), 10);
            if (!isNaN(n)) return clamp(n - 1, 0, slides.length - 1);
          }
          return 0;
        }

        var idx = slideFromHash();

        function renderDots() {
          dots.innerHTML = '';
          for (var i = 0; i < slides.length; i++) {
            var b = document.createElement('button');
            b.type = 'button';
            b.className = 'dot' + (i === idx ? ' is-active' : '');
            b.setAttribute('aria-label', 'Go to slide ' + (i + 1));
            (function (n) { b.addEventListener('click', function () { show(n); }); })(i);
            dots.appendChild(b);
          }
        }

        function show(n) {
          idx = clamp(n, 0, slides.length - 1);
          for (var i = 0; i < slides.length; i++) {
            slides[i].classList.toggle('is-active', i === idx);
          }
          window.location.hash = 'slide-' + (idx + 1);
          counter.textContent = (idx + 1) + ' / ' + slides.length;
          renderDots();
        }

        function next() { show(idx + 1); }
        function prev() { show(idx - 1); }

        prevBtn.addEventListener('click', prev);
        nextBtn.addEventListener('click', next);

        function toggleFullScreen() {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(function () { /* ignore */ });
          } else {
            document.exitFullscreen().catch(function () { /* ignore */ });
          }
        }

        if (fsBtn) fsBtn.addEventListener('click', toggleFullScreen);

        function openHelp() {
          help.classList.add('is-open');
          help.setAttribute('aria-hidden', 'false');
        }

        function closeHelp() {
          help.classList.remove('is-open');
          help.setAttribute('aria-hidden', 'true');
        }

        helpBtn.addEventListener('click', function () {
          if (help.classList.contains('is-open')) closeHelp();
          else openHelp();
        });

        help.addEventListener('click', function (e) {
          if (e.target === help) closeHelp();
        });

        window.addEventListener('keydown', function (e) {
          if (help.classList.contains('is-open')) {
            if (e.key === 'Escape') closeHelp();
            return;
          }

          if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'PageDown') { e.preventDefault(); next(); }
          if (e.key === 'ArrowLeft' || e.key === 'PageUp') { e.preventDefault(); prev(); }
          if (e.key === 'Home') { e.preventDefault(); show(0); }
          if (e.key === 'End') { e.preventDefault(); show(slides.length - 1); }
          if (e.key === '?') { e.preventDefault(); openHelp(); }
          if (e.key === 'f' || e.key === 'F') { e.preventDefault(); toggleFullScreen(); }
        });

        window.addEventListener('hashchange', function () {
          show(slideFromHash());
        });

        show(idx);

        // Timer (only exists on the last slide)
        var totalSeconds = 120;
        var remaining = totalSeconds;
        var intervalId = null;
        var running = false;

        var clock = document.getElementById('clock');
        var clockNote = document.getElementById('clockNote');
        var toast = document.getElementById('toast');
        var startBtn = document.getElementById('startBtn');
        var pauseBtn = document.getElementById('pauseBtn');
        var resetBtn = document.getElementById('resetBtn');

        function fmt(n) { return String(n).padStart(2, '0'); }

        function cue(message) {
          if (!toast) return;
          toast.textContent = message;
          toast.classList.add('show');
          window.clearTimeout(toast._t);
          toast._t = window.setTimeout(function () { toast.classList.remove('show'); }, 2200);
        }

        function renderTimer() {
          if (!clock) return;
          var mm = Math.floor(remaining / 60);
          var ss = remaining % 60;
          clock.firstChild.nodeValue = fmt(mm) + ':' + fmt(ss);
          if (remaining <= 10 && running) clock.style.color = 'var(--danger)';
          else clock.style.color = 'var(--text)';
        }

        var lastCue = null;
        function tick() {
          if (!running) return;
          remaining = Math.max(0, remaining - 1);
          renderTimer();

          if (remaining === 90 && lastCue !== 90) { lastCue = 90; cue('1:30 left: move to CSS positioning'); }
          if (remaining === 60 && lastCue !== 60) { lastCue = 60; cue('1:00 left: talk about z-index + nth-child'); }
          if (remaining === 30 && lastCue !== 30) { lastCue = 30; cue('0:30 left: depth + hover, then wrap'); }

          if (remaining === 0) {
            running = false;
            window.clearInterval(intervalId);
            intervalId = null;
            if (clockNote) clockNote.textContent = 'Time is up';
            cue('Time. Stop here.');
          }
        }

        if (startBtn) startBtn.addEventListener('click', function () {
          if (running) return;
          running = true;
          if (clockNote) clockNote.textContent = 'Speaking...';
          cue('Start. Keep it tight: topic, what, why, code, question.');
          if (!intervalId) intervalId = window.setInterval(tick, 1000);
        });

        if (pauseBtn) pauseBtn.addEventListener('click', function () {
          if (!running) return;
          running = false;
          if (clockNote) clockNote.textContent = 'Paused';
          cue('Paused');
        });

        if (resetBtn) resetBtn.addEventListener('click', function () {
          running = false;
          remaining = totalSeconds;
          lastCue = null;
          if (clockNote) clockNote.textContent = 'Press Start when you begin speaking';
          renderTimer();
          cue('Reset to 2:00');
        });

        renderTimer();
      })();
    </script>
  </body>
</html>
